<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Best Christmas Movies - Bou Challenges</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; gap: 10px;">
                <a href="../index.html" class="back-button">← Back Home</a>
                <div style="display: flex; gap: 10px;">
                    <button id="importBtn" class="btn btn-primary">Import HTML</button>
                    <button id="exportBtn" class="btn btn-primary">Export as HTML</button>
                </div>
            </div>
            <input type="file" id="importFileInput" accept=".html" style="display: none;">
        </header>

        <main>
            <section class="challenge-section">
                <div class="songs-list">
                    <h2>Top Best Christmas Movies</h2>
                    <p style="text-align: center; color: var(--text-dark); margin-bottom: 20px;">Minimum 10 ranks</p>
                    <div id="songsList" class="songs-container">
                        <!-- Rankings will be generated here -->
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button id="addRankBtn" class="btn btn-primary">+ Add Rank</button>
                        <button id="removeRankBtn" class="btn btn-remove">- Remove Rank</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Created by a Bou for a Bou | Made with ❤️</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="../js/ranking-manager.js"></script>
    <script>
        class ChristmasMoviesManager extends RankingManager {
            constructor() {
                super('christmasMovies', 'movies');
            }

            initializeDefaults() {
                const slots = [];
                for (let i = 1; i <= 10; i++) {
                    slots.push({ rank: i, title: '', artist: '', platform: '', thumbnailUrl: '' });
                }
                return slots;
            }
        }

        function createSnowfall() {
            const body = document.body;
            const snowflakeCount = 25;

            // Create a dedicated snowflake container
            const snowflakeContainer = document.createElement('div');
            snowflakeContainer.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                pointer-events: none;
                z-index: 1;
                overflow: visible;
            `;
            body.insertBefore(snowflakeContainer, body.firstChild);

            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                const size = Math.random() * 6 + 3;
                const left = Math.random() * 100;
                const duration = Math.random() * 10000 + 14000; // Slower: 14s-24s
                const delay = Math.random() * 5000;

                snowflake.style.cssText = `
                    position: fixed;
                    width: ${size}px;
                    height: ${size}px;
                    background: white;
                    border-radius: 50%;
                    opacity: 0.7;
                    left: ${left}%;
                    top: -${size}px;
                    box-shadow: 0 0 ${size * 2}px rgba(255, 255, 255, 0.9);
                    pointer-events: none;
                `;

                snowflakeContainer.appendChild(snowflake);

                // Animate each snowflake with continuous loop
                anime.timeline({ loop: true })
                    .add({
                        targets: snowflake,
                        translateY: window.innerHeight + 50,
                        translateX: Math.sin(i) * 100,
                        opacity: [0, 0.7, 0],
                        duration: duration,
                        easing: 'easeInOutQuad',
                        delay: delay
                    }, 0);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new ChristmasMoviesManager();
            createSnowfall();
        });
    </script>
</body>
</html>
